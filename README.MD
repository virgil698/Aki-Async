<div align="center">

# ğŸš€ AkiAsync

### ğŸƒ Comprehensive Async Optimization Plugin for Leaves Server

[![License](https://img.shields.io/badge/License-GPL--3.0-blue.svg)](LICENSE)
[![Leaves](https://img.shields.io/badge/Leaves-1.21.8+-green.svg)](https://github.com/LeavesMC/Leaves)
[![Java](https://img.shields.io/badge/Java-21+-orange.svg)](https://www.oracle.com/java/)
[![Build](https://img.shields.io/badge/build-passing-brightgreen.svg)](build/libs)
[![Version](https://img.shields.io/badge/version-1.1.0--Community-orange.svg)](https://github.com/virgil698/Aki-Async/releases)

ä¸€ä¸ªä¸“ä¸º **Leaves 1.21.8+** æœåŠ¡ç«¯è®¾è®¡çš„å…¨æ–¹ä½å¼‚æ­¥ä¼˜åŒ–æ’ä»¶  
ä½¿ç”¨ Mixin æ·±åº¦ä¼˜åŒ–æœåŠ¡ç«¯éƒ¨åˆ†å¡é¡¿é—®é¢˜ï¼Œç¡®ä¿æœåŠ¡ç«¯ç¨³å®šè¿è¡Œï¼Œæå‡æœåŠ¡å™¨æ€§èƒ½

</div>

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

#### **å¼‚æ­¥AIä¼˜åŒ–** (9ä¸ªæ¨¡å—)
- âš¡ **Villager** - POIå¿«ç…§+èŒä¸šåŸå­å å‘ï¼ˆæ‘æ°‘+æµæµªå•†äººï¼‰
- ğŸ· **Piglin/PiglinBrute** - UUIDè™šæ‹Ÿå¼•ç”¨+ç‰©å“æ¯”ä»·+ææƒ§å‘é‡
- ğŸ¹ **Pillager/Vindicator/Ravager** - å®‰å…¨åå°„+Raidæ£€æµ‹+æ”»å‡»ç›®æ ‡ç­›é€‰
- ğŸ§™ **Evoker** - æ³•æœ¯CD+Vexå¬å”¤+ç©ºåœ°å—æ£€æµ‹
- ğŸ”¥ **Blaze** - ç«ç„°å¼¹CD+ç«æŸ±ç©ºä½æ£€æµ‹
- ğŸŒŠ **Guardian/ElderGuardian** - æ¿€å…‰CD+æ°´ä¸‹ç©å®¶æ‰«æ
- ğŸ§  **Brain Throttle** - AIé™é¢‘ï¼Œé™æ­¢å®ä½“æ¯10 tickæ€è€ƒä¸€æ¬¡
- ğŸ—ºï¸ **Pathfinding Budget** - å¯»è·¯é¢„ç®—è°ƒåº¦ï¼Œå¹³æ»‘åˆ†æ•£è´Ÿè½½
- ğŸ”’ **Villager Job Claim Atomic** - æ‘æ°‘èŒä¸šåŸå­å å‘ï¼Œé˜²æ­¢çš®è‚¤æ¨ªè·³

#### **å¹¶è¡Œä¼˜åŒ–** (3ä¸ªæ¨¡å—)
- ğŸ”„ **Async Entity Tracker** - å®ä½“è¿½è¸ªå¼‚æ­¥åŒ–ï¼Œå‡å°‘ä¸»çº¿ç¨‹è´Ÿè½½
- ğŸ¯ **Parallel Entity Tickï¼ˆå®ä½“çº§åˆ†æ‰¹ï¼‰** - 8å®ä½“/æ‰¹ï¼Œè‡ªé€‚åº”è¶…æ—¶ï¼ŒallOfèšåˆ
- ğŸ› **Async Mob Spawning** - å¼‚æ­¥ç”Ÿç‰©ç”Ÿæˆï¼Œå¯†åº¦æ™ºèƒ½æ§åˆ¶

#### **å…‰ç…§ä¼˜åŒ–** (3ä¸ªæ¨¡å—)
- ğŸ’¡ **16-Layer Propagation Queue** - Starlightæ ¸å¿ƒç®—æ³•ï¼Œåˆ†å±‚å¤„ç†å…‰ç…§
- ğŸ”† **Smart Batch Adjustment** - TPSè‡ªé€‚åº”æ‰¹é‡å¤§å°ï¼ˆ8-64åŠ¨æ€è°ƒæ•´ï¼‰
- â˜€ï¸ **Skylight Cache + Deduplication** - å¤©ç©ºå…‰ç¼“å­˜ + å»é‡ï¼ˆ+30%æ•ˆç‡ï¼‰

#### **æ€§èƒ½ä¼˜åŒ–** (ServerCore-inspired, 3ä¸ªæ¨¡å—)
- ğŸ’¥ **Push Optimization** - æ¨æŒ¤ä¼˜åŒ–ï¼ˆ26.72%çƒ­ç‚¹ï¼‰
- ğŸ” **Entity Lookup Cache** - å®ä½“æŸ¥æ‰¾ç¼“å­˜ï¼ˆ23.12%çƒ­ç‚¹ï¼‰
- ğŸ² **Collision Optimization** - ç¢°æ’æ£€æµ‹ä¼˜åŒ–ï¼ˆ9%çƒ­ç‚¹ï¼‰

#### **å†…å­˜ä¼˜åŒ–** (FerriteCore-inspired, 3ä¸ªæ¨¡å—)
- ğŸ—„ï¸ **BlockPos Pooling** - å¯¹è±¡æ± å‡å°‘26%å†…å­˜åˆ†é…
- ğŸ“¦ **Predicate Cache** - è°“è¯ç¼“å­˜ï¼Œé™ä½GCå‹åŠ›
- ğŸ“‹ **List Pre-allocation** - åˆ—è¡¨é¢„åˆ†é…ï¼Œå‡å°‘ArrayListæ‰©å®¹

---

## âœ¨ è¯¦ç»†ç‰¹æ€§

<details>
<summary><b>ğŸ”„ å¼‚æ­¥å®ä½“è¿½è¸ªå™¨ (Async Entity Tracker)</b></summary>

- å°†å®ä½“ä½ç½®æ›´æ–°è®¡ç®—ç§»è‡³å¼‚æ­¥çº¿ç¨‹
- å¼‚æ­¥å¤„ç†ç©å®¶è§†è·å†…çš„å®ä½“å¯è§æ€§æ£€æŸ¥
- ä½ç½®é¢„æµ‹å’Œè¾¹ç¼˜æ£€æµ‹ä¼˜åŒ–
- æ™ºèƒ½å¤„ç†ï¼šç©å®¶å®ä½“ä¿æŒåŒæ­¥ç¡®ä¿å“åº”é€Ÿåº¦

</details>

<details>
<summary><b>ğŸ¯ å¹¶è¡Œå®ä½“Tickï¼ˆå®ä½“çº§åˆ†æ‰¹ï¼‰</b> - 76%çƒ­ç‚¹ä¼˜åŒ–ï¼Œæ‰©å®¹å‡çº§ç‰ˆ</summary>

**åšäº†ä»€ä¹ˆ**ï¼š
- æŠŠchunkçº§åˆ†ç»„æ”¹æˆå®ä½“çº§åˆ†æ‰¹ï¼ˆ8ä¸ªå®ä½“ä¸€æ‰¹ï¼‰
- é¿å…æŸä¸ªchunkæœ‰150ä¸ªå®ä½“ï¼Œå…¶ä»–chunkåªæœ‰å‡ ä¸ªçš„æƒ…å†µ
- è¶…æ—¶æ—¶é—´æ ¹æ®MSPTè‡ªåŠ¨è°ƒæ•´ï¼ˆ25-100msï¼‰
- ç”¨CompletableFuture.allOfç­‰æ‰€æœ‰æ‰¹æ¬¡éƒ½å®Œæˆ

**æ”¹è¿›ç‚¹**ï¼š
- ä»»åŠ¡å¤§å°å‡è¡¡ï¼ˆæ¯æ‰¹å›ºå®š8ä¸ªå®ä½“ï¼‰
- æ²¡æœ‰é•¿å°¾ä»»åŠ¡æ‹–æ…¢æ•´ä½“
- ä¸å’Œå…¶ä»–å¼‚æ­¥ä»»åŠ¡æŠ¢çº¿ç¨‹æ± 

**æ•ˆæœ**ï¼š
- MSPTä»14.6ms â†’ 9.34msï¼ˆå†é™36%ï¼‰
- é…ç½®batch-sizeå¯è°ƒï¼ˆé»˜è®¤8ï¼‰

</details>

<details>
<summary><b>ğŸ’¡ å¢å¼ºç‰ˆå¼‚æ­¥å…‰ç…§ (Enhanced Async Lighting)</b> - Starlightç®—æ³•</summary>

**åŸºç¡€ä¼˜åŒ–**ï¼š
- åŒºå—åŠ è½½æ—¶çš„å¼‚æ­¥å…‰ç…§è®¡ç®—
- å…‰ç…§æ›´æ–°æ‰¹é‡å¤„ç†ï¼ˆå‡å°‘çº¿ç¨‹å¼€é”€ï¼‰
- å¤©ç©ºå…‰ç¼“å­˜ï¼ˆé¿å…é‡å¤è®¡ç®—ï¼‰
- ä¸“ç”¨å…‰ç…§çº¿ç¨‹æ± ï¼ˆ2çº¿ç¨‹é»˜è®¤ï¼‰

**é«˜çº§ä¼˜åŒ–** â­ï¼š
- **çœŸæ­£çš„16å±‚åˆ†å±‚ä¼ æ’­é˜Ÿåˆ—** - Starlightæ ¸å¿ƒç®—æ³•ï¼ˆå…‰ç…§ç­‰çº§0-15ï¼‰
- **æ™ºèƒ½æ‰¹é‡å¤§å°è°ƒæ•´** - æ ¹æ®TPSåŠ¨æ€è°ƒæ•´ï¼ˆ8-64èŒƒå›´ï¼‰
- **å…‰ç…§æ›´æ–°å»é‡** - é˜²æ­¢é‡å¤è®¡ç®—ï¼Œæå‡30%æ•ˆç‡
- **ä¼ æ’­è·ç¦»é™åˆ¶** - é˜²æ­¢è¿‡æœŸæ›´æ–°ï¼Œ5ç§’è¶…æ—¶æ¸…ç†

</details>

<details>
<summary><b>âš¡ é›¶å»¶è¿Ÿå¼‚æ­¥AI - æ‘æ°‘</b></summary>

**åšäº†ä»€ä¹ˆ**ï¼š
- æŠŠæ‘æ°‘æ‰¾å·¥ä½œç«™ã€æ‰¾åºŠä½çš„POIæŸ¥è¯¢æ”¾åˆ°å¼‚æ­¥çº¿ç¨‹
- ä¸»çº¿ç¨‹åªæ‹ä¸ªå¿«ç…§ï¼Œå¼‚æ­¥çº¿ç¨‹ç®—å®Œäº†å†å†™å›
- åŒä¸€tickå†…å®Œæˆï¼Œæ‘æ°‘è¡Œä¸ºçœ‹ä¸å‡ºåŒºåˆ«

**æŠ€æœ¯è¦ç‚¹**ï¼š
- POIå¿«ç…§ï¼ˆä¸å¯å˜Mapï¼Œçº¿ç¨‹å®‰å…¨ï¼‰
- å¼‚æ­¥ç®—64ä¸ªPOIçš„è·ç¦»è¯„åˆ†
- ExpirableValueç±»å‹å¤„ç†ï¼ˆé¿å…ClassCastExceptionï¼‰
- èŒä¸šç”³è¯·åŠ åŸå­é”ï¼ˆé˜²æ­¢æ‘æ°‘çš®è‚¤æ¥å›è·³ï¼‰

**æ•ˆæœï¼ˆ44æ‘æ°‘æµ‹è¯•ï¼‰**ï¼š
- MSPTï¼š36ms â†’ 14.6msï¼ˆé™ä½60%ï¼‰
- æ‘æ°‘èŒä¸šç¨³å®šï¼ˆä¸å†ç²’å­å‡ºç°äº†ä½†çš®è‚¤ä¸å˜ï¼‰
- äº¤æ˜“æ­£å¸¸ï¼Œä¸æ‘‡å¤´

**é…ç½®**ï¼š
```yaml
villager-optimization:
  enabled: true
  use-poi-snapshot: true
```

</details>

<details>
<summary><b>ğŸ· é›¶å»¶è¿Ÿå¼‚æ­¥AI - çŒªçµ/è›®å…µ</b></summary>

**æ”¯æŒ**ï¼šçŒªçµ + çŒªçµè›®å…µ

**åšäº†ä»€ä¹ˆ**ï¼š
- æŠŠé‡‘å¸æ£€æµ‹ã€ç‰©å“æ¯”ä»·ã€ææƒ§å‘é‡è®¡ç®—æ”¾åˆ°å¼‚æ­¥çº¿ç¨‹
- ä¸»çº¿ç¨‹åªåšæœ€åçš„å†™å›ï¼ˆ< 0.1msï¼‰
- 3 tickæ‰§è¡Œä¸€æ¬¡ï¼ˆæ¯”æ‘æ°‘ç¨€ç–ï¼Œé¿å…è¿‡è½½ï¼‰

**æŠ€æœ¯è¦ç‚¹**ï¼š
- å¼‚æ­¥é˜¶æ®µå­˜UUIDï¼ˆä¸å­˜Playerå¼•ç”¨ï¼Œé¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰
- ä¸»çº¿ç¨‹ç”¨UUIDæŸ¥ç©å®¶ï¼Œå†æ£€æŸ¥è·ç¦»å’Œæ˜¯å¦æŒé‡‘
- é˜²æ­¢ç©å®¶ä¸‹çº¿å¯¼è‡´NPE

**æ•ˆæœ**ï¼š
- 50åªçŒªçµåŸæœ¬åƒæ‰2ä¸ªTPS
- ä¼˜åŒ–åä¸å½±å“TPS
- çŒªçµè¡Œä¸ºæ­£å¸¸ï¼ˆå¯»è·¯ã€äº¤æ˜“ã€é€ƒè·‘ï¼‰

**é…ç½®**ï¼š
```yaml
piglin-optimization:
  enabled: false  # éœ€è¦æ—¶å†å¼€
  look-distance: 16  # å¯è°ƒå°ï¼ˆ10/12ï¼‰é¿å…å¡é¡¿
```

</details>

<details>
<summary><b>ğŸ¹ é›¶å»¶è¿Ÿå¼‚æ­¥AI - åŠ«æ è€…å®¶æ—</b></summary>

**æ”¯æŒ**ï¼šPillagerï¼ˆåŠ«æ è€…ï¼‰+ Vindicatorï¼ˆå«é“å£«ï¼‰+ Ravagerï¼ˆåŠ«æ å…½ï¼‰

**åšäº†ä»€ä¹ˆ**ï¼š
- Crossbowè£…å¡«æ£€æµ‹ã€Raidä½ç½®æ‰«æã€æ”»å‡»ç›®æ ‡ç­›é€‰ã€å·¡é€»POIè¯„åˆ†
- å…¨éƒ¨æ”¾åˆ°å¼‚æ­¥çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹å®‰å…¨åå°„å†™å›
- 3 tickæ‰§è¡Œä¸€æ¬¡ï¼Œé¿å…è¿‡è½½

**æŠ€æœ¯è¦ç‚¹**ï¼š
- å®‰å…¨REFLECTIONSå·¥å…·ï¼ˆlazy initï¼Œä¸ä¼šåƒWitchå´©æºƒï¼‰
- åå°„å†™å­—æ®µï¼štargetï¼ˆæ”»å‡»ç›®æ ‡ï¼‰ã€raidCenterï¼ˆRaidä¸­å¿ƒï¼‰ã€patrolTargetï¼ˆå·¡é€»ç›®æ ‡ï¼‰
- å­—æ®µè‡ªåŠ¨æœç´¢çˆ¶ç±»ï¼ˆå…¼å®¹Paperå­—æ®µé‡æ··æ·†ï¼‰

**é…ç½®**ï¼š
```yaml
pillager-family-optimization:
  enabled: true
```

</details>

<details>
<summary><b>ğŸ§™ é›¶å»¶è¿Ÿå¼‚æ­¥AI - Evokerï¼ˆå”¤é­”è€…ï¼‰</b> - v1.1</summary>

**è®¡ç®—å†…å®¹**ï¼š
- æ³•æœ¯CDæ£€æµ‹ï¼ˆåŸºäºç”Ÿå‘½å€¼ç®€åŒ–ï¼‰
- Vexå¬å”¤ç©ºåœ°å—æ£€æµ‹ï¼ˆ3x3èŒƒå›´ï¼‰
- æœ€è¿‘ç©å®¶ç›®æ ‡ç­›é€‰

**æŠ€æœ¯**ï¼š
- Mob.tick()æ³¨å…¥ + instanceofè¿‡æ»¤ï¼ˆPaper inlineæ–¹æ³•è§„é¿ï¼‰
- å®‰å…¨åå°„å†™ Mob.target å­—æ®µ

**é…ç½®**ï¼š
```yaml
evoker-optimization:
  enabled: true
```

</details>

<details>
<summary><b>ğŸ”¥ é›¶å»¶è¿Ÿå¼‚æ­¥AI - Blazeï¼ˆçƒˆç„°äººï¼‰</b> - v1.1</summary>

**è®¡ç®—å†…å®¹**ï¼š
- ç«ç„°å¼¹CDæ£€æµ‹
- ç«æŸ±ç©ºä½æ£€æµ‹ï¼ˆabove(2)ä½ç½®ï¼‰
- 32æ ¼å†…ç©å®¶æ‰«æ

**æŠ€æœ¯**ï¼š
- Mob.tick()æ³¨å…¥ + instanceofè¿‡æ»¤
- å®‰å…¨åå°„å†™ target + fireColumnPos

**é…ç½®**ï¼š
```yaml
blaze-optimization:
  enabled: true
```

</details>

<details>
<summary><b>ğŸŒŠ é›¶å»¶è¿Ÿå¼‚æ­¥AI - Guardianï¼ˆå®ˆå«è€…ï¼‰</b> - v1.1</summary>

**æ”¯æŒ**ï¼šGuardianï¼ˆå®ˆå«è€…ï¼‰+ ElderGuardianï¼ˆè¿œå¤å®ˆå«è€…ï¼Œè‡ªåŠ¨åŒ…å«ï¼‰

**è®¡ç®—å†…å®¹**ï¼š
- æ¿€å…‰CDæ£€æµ‹
- æ°´ä¸‹ç©å®¶æ‰«æï¼ˆisInWaterè¿‡æ»¤ï¼‰
- æœ€è¿‘æ°´ä¸‹ç›®æ ‡ç­›é€‰

**æŠ€æœ¯**ï¼š
- Javaç»§æ‰¿ï¼šElderGuardian extends Guardian â†’ instanceofè‡ªåŠ¨è¦†ç›–
- å®‰å…¨åå°„å†™ target + beamTarget

**é…ç½®**ï¼š
```yaml
guardian-optimization:
  enabled: true  # è¿œå¤å®ˆå«è€…è‡ªåŠ¨åŒ…å«
```

</details>

<details>
<summary><b>ğŸ§  AI Brain é™é¢‘ (Brain Throttle)</b></summary>

- é™æ­¢å®ä½“åœ¨å¯é…ç½®é—´éš”å†…è·³è¿‡ `Brain#tick`
- äº‹ä»¶å‘ç”Ÿç«‹å³æ¢å¤æ­£å¸¸é¢‘ç‡
- å¯¹ä½æ´»è·ƒåº¦å®ä½“é™ä½AIè®¡ç®—é¢‘ç‡
- å¯é…ç½®é™é¢‘é—´éš”ï¼ˆé»˜è®¤10 tickï¼‰

</details>

<details>
<summary><b>ğŸ—ºï¸ å¯»è·¯é¢„ç®—è°ƒåº¦ (Pathfinding Budget)</b></summary>

- ä¸º `PathNavigation#createPath` è®¾ç½®æ¯tické¢„ç®—
- è¶…å‡ºé¢„ç®—çš„è¯·æ±‚åŠ å…¥å»¶è¿Ÿé˜Ÿåˆ—
- å¹³æ»‘åˆ†æ•£è´Ÿè½½ï¼Œé¿å…å•tickå¯»è·¯çˆ†ç‚¸
- å»¶è¿Ÿé˜Ÿåˆ—è‡ªåŠ¨åœ¨ä¸‹ä¸€tickå¤„ç†

</details>

<details>
<summary><b>ğŸ› å¼‚æ­¥ç”Ÿç‰©ç”Ÿæˆ (Async Mob Spawning)</b></summary>

- åœ¨ NaturalSpawner è°ƒç”¨ç‚¹é™æµ
- åŒºå—å¯†åº¦é˜ˆå€¼æ§åˆ¶
- Spawner æ–¹å—ä¼˜åŒ–
- é¢„è®¡ç®—ä¸ç¼“å­˜ç”Ÿæˆæ¡ä»¶

</details>

<details>
<summary><b>ğŸ’¥ ServerCore æ€§èƒ½ä¼˜åŒ–å¥—ä»¶</b></summary>

- **Push Optimization** (26.72%çƒ­ç‚¹) - æ¨æŒ¤é—´éš”æ§åˆ¶
- **Entity Lookup Cache** (23.12%çƒ­ç‚¹) - æŸ¥æ‰¾ç»“æœç¼“å­˜50ms
- **Collision Optimization** (9%çƒ­ç‚¹) - é™æ­¢å®ä½“è·³è¿‡ç¢°æ’æ£€æµ‹

</details>

<details>
<summary><b>ğŸ—„ï¸ FerriteCore å†…å­˜ä¼˜åŒ–å¥—ä»¶</b></summary>

- **BlockPos Pooling** - å¯¹è±¡æ± å‡å°‘26%å†…å­˜åˆ†é…
- **Predicate Cache** - è°“è¯ç¼“å­˜é™ä½GCå‹åŠ›
- **List Pre-allocation** - å‡å°‘ArrayListæ‰©å®¹å¼€é”€

</details>

---

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

| ç»„ä»¶ | è¦æ±‚ |
|------|------|
| **æœåŠ¡ç«¯** | [Leaves](https://github.com/LeavesMC/Leaves) 1.21.8+ |
| **JDK** | Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬ |
| **å†…å­˜** | æ¨è 4GB+ |
| **CPU** | æ¨è 4æ ¸å¿ƒ+ (æ”¯æŒå¤šçº¿ç¨‹) |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šä¸‹è½½ Releaseï¼ˆæ¨èï¼‰

> âš  æœ¬é¡¹ç›®æ­£åœ¨å¼€å‘ä¸­ï¼Œæš‚æ—¶ä¸æä¾› Releases ä¸‹è½½ï¼Œè¯·ä½¿ç”¨æ–¹å¼2ä»æºç æ„å»º

### æ–¹å¼2ï¼šä»æºç æ„å»º

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/virgil698/Aki-Async.git
cd Aki-Async

# 2. æ„å»º
./gradlew clean build

# 3. JAR æ–‡ä»¶ä½äº build/libs/Aki-Async-1.0.0-SNAPSHOT.jar
```

### âš™ï¸ å¯åŠ¨å‚æ•°ï¼ˆé‡è¦ï¼ï¼‰

```bash
# å¿…é¡»æ·»åŠ æ­¤å‚æ•°å¯ç”¨ Mixin æ”¯æŒï¼Œå¦åˆ™æ’ä»¶æ— æ³•åŠ è½½
-Dleavesclip.enable.mixin=true
```

## âš™ï¸ é…ç½®

é…ç½®æ–‡ä»¶ä½äº `plugins/AkiAsync/config.yml`ï¼Œé¦–æ¬¡å¯åŠ¨è‡ªåŠ¨ç”Ÿæˆ

é…ç½®æ–‡ä»¶é»˜è®¤å·²æ·»åŠ æ‰€æœ‰ä¼˜åŒ–æ¨¡å—ï¼Œè¯·æ ¹æ®éœ€è¦è‡ªè¡Œè°ƒæ•´

<details>
<summary><b>é»˜è®¤é…ç½®</b></summary>

```yaml
# ==========================================
# AkiAsync é…ç½®æ–‡ä»¶ / Configuration File
# ==========================================
# ç‰ˆæœ¬ / Version: 1.1.0
# é€‚ç”¨æœåŠ¡ç«¯ / Server: Leaves 1.21.8+
# ==========================================

# å¼‚æ­¥å®ä½“è¿½è¸ªå™¨ / Async Entity Tracker
# è¯´æ˜ï¼šå°†å®ä½“ä½ç½®æ›´æ–°ç§»è‡³å¼‚æ­¥çº¿ç¨‹å¤„ç†
# Description: Offload entity position tracking to async threads
entity-tracker:
  enabled: true
  # çº¿ç¨‹æ± å¤§å° / Thread pool size
  # æ¨èå€¼ï¼šCPUæ ¸å¿ƒæ•° / Recommended: CPU core count
  thread-pool-size: 4
  # æ›´æ–°é—´éš”ï¼ˆtickï¼‰/ Update interval (ticks)
  update-interval-ticks: 1
  # æœ€å¤§é˜Ÿåˆ—å¤§å° / Maximum queue size
  max-queue-size: 1000
  # æ‰¹é‡å¤„ç†å¤§å° / Batch processing size
  batch-size: 50

# å¼‚æ­¥ç”Ÿç‰©ç”Ÿæˆ / Async Mob Spawning
# è¯´æ˜ï¼šå¼‚æ­¥å¤„ç†ç”Ÿç‰©è‡ªç„¶ç”Ÿæˆé€»è¾‘
# Description: Async natural mob spawning logic
mob-spawning:
  enabled: true
  # åˆ·æ€ªç¬¼ä¼˜åŒ– / Spawner block optimization
  spawner-optimization: true

# å®ä½“å¯†åº¦æ§åˆ¶ / Entity Density Control
# è¯´æ˜ï¼šé™åˆ¶å•åŒºå—å®ä½“æ•°é‡
# Description: Limit entities per chunk
density:
  # å•åŒºå—æœ€å¤§å®ä½“æ•° / Max entities per chunk
  max-per-chunk: 80

# å¯»è·¯é¢„ç®— / Pathfinding Budget
# è¯´æ˜ï¼šé™åˆ¶æ¯tickå¯»è·¯è®¡ç®—é‡
# Description: Limit pathfinding computations per tick
pathfinding:
  # æ¯tické¢„ç®—ï¼ˆ0=ç¦ç”¨ï¼‰/ Budget per tick (0=disabled)
  tick-budget: 0

# AIé™é¢‘ / Brain Throttle
# è¯´æ˜ï¼šé™æ­¢å®ä½“é™ä½AIæ›´æ–°é¢‘ç‡
# Description: Reduce AI update frequency for stationary entities
brain:
  # å¯ç”¨é™é¢‘ / Enable throttling
  throttle: true
  # é™é¢‘é—´éš”ï¼ˆtickï¼‰/ Throttle interval (ticks)
  throttle-interval: 10

# ==========================================
# é›¶å»¶è¿Ÿå¼‚æ­¥AI / Zero-Latency Async AI
# ==========================================
# æ ¸å¿ƒæ€è·¯ / Core Strategy:
#   1. ä¸»çº¿ç¨‹æ‹å¿«ç…§ / Main thread takes snapshot
#   2. å¼‚æ­¥çº¿ç¨‹è®¡ç®— / Async thread computes
#   3. ä¸»çº¿ç¨‹å†™å›ç»“æœ / Main thread writes back
# ==========================================
async-ai:
  # å…¨å±€è¶…æ—¶æ—¶é—´ï¼ˆå¾®ç§’ï¼‰/ Global timeout (microseconds)
  # 100Î¼s = 0.1ms
  timeout-microseconds: 100
  
  # æ‰§è¡Œæ¨¡å¼ / Execution mode
  mode: simple
  
  # ---------- æ‘æ°‘ä¼˜åŒ– / Villager Optimization ----------
  # æ”¯æŒå®ä½“ / Supported: Villager, Wandering Trader
  # æŠ€æœ¯ç‰¹æ€§ / Features: POIå¿«ç…§ + èŒä¸šåŸå­å å‘
  villager-optimization:
    # å¯ç”¨å¼€å…³ / Enable toggle
    enabled: false
    # ä½¿ç”¨POIå¿«ç…§ / Use POI snapshot
    # è¯´æ˜ï¼šæ‘æ°‘éœ€è¦POIç³»ç»Ÿï¼ˆåºŠã€å·¥ä½œç«™ï¼‰
    # Description: Villagers need POI system (beds, job sites)
    use-poi-snapshot: true
  
  # ---------- çŒªçµå®¶æ—ä¼˜åŒ– / Piglin Family Optimization ----------
  # æ”¯æŒå®ä½“ / Supported: Piglin, PiglinBrute
  # æŠ€æœ¯ç‰¹æ€§ / Features: UUIDè™šæ‹Ÿå¼•ç”¨ + ç‰©å“æ¯”ä»· + ææƒ§å‘é‡
  piglin-optimization:
    enabled: false
    use-poi-snapshot: false
    # æ³¨è§†è·ç¦»ï¼ˆæ ¼ï¼‰/ Look distance (blocks)
    look-distance: 16
    # äº¤æ˜“è·ç¦»ï¼ˆæ ¼ï¼‰/ Barter distance (blocks)
    barter-distance: 16
  
  # ---------- æ å¤ºè€…å®¶æ—ä¼˜åŒ– / Pillager Family Optimization ----------
  # æ”¯æŒå®ä½“ / Supported: Pillager, Vindicator, Ravager
  # æŠ€æœ¯ç‰¹æ€§ / Features: å®‰å…¨åå°„å†™å­—æ®µ + Raidæ£€æµ‹
  # æ³¨æ„ / Note: Evokerå•ç‹¬ä¼˜åŒ–ï¼ˆè§ä¸‹æ–¹ï¼‰
  pillager-family-optimization:
    enabled: false
    use-poi-snapshot: false
  
  # ---------- é«˜çº§AIå®ä½“ä¼˜åŒ– / High-AI Entity Optimization ----------
  # v1.1æ–°å¢ / v1.1 New
  
  # Evokerä¼˜åŒ– / Evoker Optimization
  # æ”¯æŒå®ä½“ / Supported: Evoker
  # è®¡ç®—å†…å®¹ / Computations: æ³•æœ¯CD + å¬å”¤Vex + ç©ºåœ°å—æ£€æµ‹
  evoker-optimization:
    enabled: false
  
  # Blazeä¼˜åŒ– / Blaze Optimization  
  # æ”¯æŒå®ä½“ / Supported: Blaze
  # è®¡ç®—å†…å®¹ / Computations: ç«ç„°å¼¹CD + ç«æŸ±ç©ºä½æ£€æµ‹
  blaze-optimization:
    enabled: false
  
  # Guardianä¼˜åŒ– / Guardian Optimization
  # æ”¯æŒå®ä½“ / Supported: Guardian, ElderGuardian
  # è®¡ç®—å†…å®¹ / Computations: æ¿€å…‰CD + æ°´ä¸‹ç©å®¶æ‰«æ
  # è¯´æ˜ï¼šè¿œå¤å®ˆå«è€…è‡ªåŠ¨åŒ…å«ï¼ˆJavaç»§æ‰¿ï¼‰
  # Description: Elder guardian auto-included (Java inheritance)
  guardian-optimization:
    enabled: false
  
  # ç®€å•å®ä½“ä¼˜åŒ– / Simple Entities Optimization
  # æ”¯æŒå®ä½“ / Supported: Zombie, Skeleton, Creeper, etc
  # è¯´æ˜ï¼šä¸ä¾èµ–POIçš„ç®€å•AIå®ä½“
  # Description: Simple AI entities without POI dependency
  simple-entities:
    enabled: false
    use-poi-snapshot: false

# ==========================================
# å¹¶è¡Œå®ä½“Tick / Parallel Entity Tick
# ==========================================
# è¯´æ˜ï¼šå°†å®ä½“tickåˆ†æ‰¹å¹¶è¡Œå¤„ç†ï¼ˆ76%çƒ­ç‚¹ä¼˜åŒ–ï¼‰
# Description: Batch entities for parallel tick processing
entity-tick-parallel:
  # å¯ç”¨å¼€å…³ / Enable toggle
  enabled: true
  # çº¿ç¨‹æ•° / Thread count
  # æ¨èï¼šCPUæ ¸å¿ƒæ•°Ã—1.5 / Recommended: CPU cores Ã— 1.5
  threads: 6
  # æœ€å°å®ä½“æ•°é˜ˆå€¼ / Minimum entities threshold
  # è¯´æ˜ï¼šä½äºæ­¤å€¼ä¸å¯ç”¨å¹¶è¡Œï¼ˆé¿å…overheadï¼‰
  # Description: Skip parallel if entities < threshold
  min-entities: 50
  # æ‰¹é‡å¤§å°ï¼ˆå®ä½“çº§ç²’åº¦ï¼‰/ Batch size (entity-level granularity)
  # è¯´æ˜ï¼š8ä¸ªå®ä½“ä¸€æ‰¹ï¼Œä»»åŠ¡å‡è¡¡
  # Description: 8 entities per batch, balanced task size
  batch-size: 8

# ==========================================
# æ€§èƒ½ä¼˜åŒ–å¥—ä»¶ / Performance Optimizations
# ==========================================
# ServerCoreå¯å‘ / ServerCore-inspired
servercore-optimizations:
  # æ¨æŒ¤ä¼˜åŒ– / Push optimization
  # çƒ­ç‚¹å æ¯” / Hotspot: 26.72%
  push-optimization:
    enabled: true
    interval: 2
  
  # å®ä½“æŸ¥æ‰¾ç¼“å­˜ / Entity lookup cache
  # çƒ­ç‚¹å æ¯” / Hotspot: 23.12%
  entity-lookup-cache:
    enabled: true
    # ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆæ¯«ç§’ï¼‰/ Cache duration (milliseconds)
    duration-ms: 50
  
  # ç¢°æ’æ£€æµ‹ä¼˜åŒ– / Collision optimization
  # çƒ­ç‚¹å æ¯” / Hotspot: 9%
  collision-optimization:
    enabled: true
    min-movement: 0.001

# ==========================================
# å†…å­˜ä¼˜åŒ–å¥—ä»¶ / Memory Optimizations
# ==========================================
# FerriteCoreå¯å‘ / FerriteCore-inspired
memory-optimizations:
  # è°“è¯ç¼“å­˜ / Predicate cache
  # è¯´æ˜ï¼šç¼“å­˜å¸¸ç”¨è°“è¯ï¼Œé™ä½GCå‹åŠ›
  # Description: Cache common predicates, reduce GC pressure
  predicate-cache:
    enabled: true
  
  # BlockPoså¯¹è±¡æ±  / BlockPos object pool
  # è¯´æ˜ï¼šå¤ç”¨BlockPoså¯¹è±¡ï¼Œå‡å°‘26%å†…å­˜åˆ†é…
  # Description: Reuse BlockPos objects, 26% allocation reduction
  blockpos-pool:
    enabled: true
  
  # åˆ—è¡¨é¢„åˆ†é… / List pre-allocation
  # è¯´æ˜ï¼šé¢„åˆ†é…å®¹é‡ï¼Œå‡å°‘ArrayListæ‰©å®¹
  # Description: Pre-allocate capacity, reduce ArrayList resizing
  list-prealloc:
    enabled: true
    # é»˜è®¤åˆå§‹å®¹é‡ / Default initial capacity
    default-capacity: 32

# æ–¹å—å®ä½“ä¼˜åŒ– / Block Entity Optimizations
block-entity-optimizations:
  # ç†”ç‚‰ä¼˜åŒ– / Furnace optimization
  # è¯´æ˜ï¼šç©ºé—²æ—¶è·³è¿‡tick
  # Description: Skip tick when idle
  furnace-optimization:
    enabled: true

# ==========================================
# å…‰ç…§ä¼˜åŒ–å¥—ä»¶ / Lighting Optimizations
# ==========================================
# Starlight/ScalableLuxå¯å‘ / Starlight-inspired
lighting-optimizations:
  # å¼‚æ­¥å…‰ç…§ / Async lighting
  async-lighting:
    enabled: true
    # å…‰ç…§çº¿ç¨‹æ± å¤§å° / Lighting thread pool size
    thread-pool-size: 2
    # æ‰¹é‡å¤„ç†é˜ˆå€¼ / Batch threshold
    batch-threshold: 16
  
  # å…‰ç…§ä¼ æ’­é˜Ÿåˆ— / Propagation queue
  propagation-queue:
    # åˆ†å±‚é˜Ÿåˆ—ï¼ˆStarlightæ ¸å¿ƒç®—æ³•ï¼‰/ Layered queue (Starlight core)
    # è¯´æ˜ï¼š16å±‚é˜Ÿåˆ—ï¼ŒæŒ‰å…‰ç…§ç­‰çº§0-15åˆ†å±‚å¤„ç†
    # Description: 16-layer queue, processes by light level 0-15
    use-layered-queue: true
    # æœ€å¤§ä¼ æ’­è·ç¦» / Max propagation distance
    max-propagation-distance: 15
  
  # å¤©ç©ºå…‰ç¼“å­˜ / Skylight cache
  skylight-cache:
    enabled: true
    # ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆæ¯«ç§’ï¼‰/ Cache duration (milliseconds)
    cache-duration-ms: 100
  
  # é«˜çº§ä¼˜åŒ– / Advanced optimizations
  advanced:
    # å¯ç”¨å»é‡ / Enable deduplication
    # è¯´æ˜ï¼šé˜²æ­¢åŒä¸€ä½ç½®é‡å¤æ’é˜Ÿ
    # Description: Prevent same position from queuing multiple times
    enable-deduplication: true
    # åŠ¨æ€æ‰¹é‡å¤§å°è°ƒæ•´ / Dynamic batch adjustment
    # è¯´æ˜ï¼šæ ¹æ®TPSè‡ªåŠ¨è°ƒæ•´æ‰¹é‡å¤§å°
    # Description: Auto-adjust batch size based on TPS
    dynamic-batch-adjustment: true
    # è¾“å‡ºé«˜çº§ç»Ÿè®¡ / Log advanced stats
    log-advanced-stats: false

# ==========================================
# æ€§èƒ½ç›‘æ§ / Performance Monitoring
# ==========================================
performance:
  # è°ƒè¯•æ—¥å¿— / Debug logging
  # è­¦å‘Šï¼šä¼šåˆ·å± / Warning: Console spam!
  debug-logging: false
  
  # æ€§èƒ½æŒ‡æ ‡æ”¶é›† / Metrics collection
  # è¯´æ˜ï¼šæ˜¾ç¤ºå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ—¶é—´å’Œé˜Ÿåˆ—å¤§å°
  # Description: Show async task execution times and queue sizes
  enable-metrics: true

# ==========================================
# é…ç½®å»ºè®® / Configuration Tips
# ==========================================
# å°å‹æœåŠ¡å™¨ / Small servers (1-10äºº):
#   - thread-pool-size: 2-4
#   - threads: 4
#
# ä¸­å‹æœåŠ¡å™¨ / Medium servers (10-50äºº):
#   - thread-pool-size: 4-8
#   - threads: 6-8
#
# å¤§å‹æœåŠ¡å™¨ / Large servers (50+äºº):
#   - thread-pool-size: 8-16
#   - threads: 8-12
#
# æç¤º / Tip: æ›´å¤šçº¿ç¨‹â‰ æ›´å¥½æ€§èƒ½ï¼ä»æ¨èå€¼å¼€å§‹è°ƒæ•´ã€‚
# More threads â‰  better performance! Start with recommended values.

```
</details>

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ„å»ºé¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/virgil698/Aki-Async.git
cd Aki-Async

# æ„å»º
./gradlew clean build

# æ„å»ºäº§ç‰©
# build/libs/Aki-Async-1.0.0-SNAPSHOT.jar
```

## ğŸ“š å‚è€ƒä¸è‡´è°¢

æœ¬é¡¹ç›®å‚è€ƒäº†å¤šä¸ªä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

| é¡¹ç›® | è´¡çŒ® |
|------|------|
| [Starlight](https://github.com/PaperMC/Starlight) / [ScalableLux](https://github.com/RelativityMC/ScalableLux) | 16å±‚å…‰ç…§ä¼ æ’­é˜Ÿåˆ—æ ¸å¿ƒç®—æ³• |
| [Lithium](https://github.com/CaffeineMC/lithium) | é€šç”¨æ€§èƒ½ä¼˜åŒ–æ€è·¯ |
| [ServerCore](https://github.com/Wesley1808/ServerCore) | Push/Collision/Lookupä¼˜åŒ– |
| [FerriteCore](https://github.com/malte0811/FerriteCore) | å†…å­˜ä¼˜åŒ–ç­–ç•¥ |
| [Nitori](https://github.com/Gensokyo-Reimagined/Nitori) | å®ä½“è¿½è¸ªå™¨è®¾è®¡ |
| [Async](https://github.com/AxalotLDev/Async) | å¼‚æ­¥åŒ–å®‰å…¨è¾¹ç•Œ |
| [Leaves](https://github.com/LeavesMC/Leaves) | Mixinæ”¯æŒå’ŒæœåŠ¡ç«¯åŸºç¡€ |

è¯¦è§ [REFERENCE_MODS.md](docs/REFERENCE_MODS.md)

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

**å¼€å‘æŒ‡å—**ï¼š
1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ï¼ˆä½¿ç”¨[çº¦å®šå¼æäº¤](https://www.conventionalcommits.org/zh-hans/)ï¼‰
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ Pull Request

### æäº¤è§„èŒƒ

```bash
feat(module): add new optimization
fix(lighting): resolve chunk loading issue
perf(entity): improve parallel processing
docs: update configuration guide
```

---

## âš ï¸ å…è´£å£°æ˜

- âš ï¸ æœ¬æ’ä»¶é€šè¿‡ Mixin ä¿®æ”¹æœåŠ¡ç«¯æ ¸å¿ƒä»£ç ï¼Œ**è¯·åœ¨æµ‹è¯•æœåŠ¡å™¨å……åˆ†éªŒè¯åå†ç”¨äºç”Ÿäº§**
- âš ï¸ ä¸ä¿è¯ä¸æ‰€æœ‰æ’ä»¶100%å…¼å®¹ï¼ˆç‰¹åˆ«æ˜¯å…¶ä»–Mixinæ’ä»¶ï¼‰
- âš ï¸ å¦‚é‡é—®é¢˜è¯·å…ˆç¦ç”¨æ’ä»¶ï¼Œç„¶åæäº¤ [Issue](https://github.com/virgil698/Aki-Async/issues)
- âœ… å·²åœ¨ç”Ÿäº§ç¯å¢ƒéªŒè¯ç¨³å®šæ€§ï¼ˆ1400+å®ä½“åœºæ™¯ï¼‰

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ **[GPL-3.0 License](LICENSE)** å¼€æºåè®®ã€‚

### ğŸ†“ ç¤¾åŒºç‰ˆè¯´æ˜

è¿™æ˜¯ **AkiAsync Community Editionï¼ˆç¤¾åŒºç‰ˆï¼‰**ï¼š
- âœ… å®Œå…¨å…è´¹ä½¿ç”¨
- âœ… æºä»£ç å¼€æ”¾
- âœ… å…è®¸å•†ä¸šä½¿ç”¨
- âœ… 22ä¸ªä¼˜åŒ–æ¨¡å—ï¼ˆ9ä¸ªé›¶å»¶è¿Ÿå¼‚æ­¥AIï¼Œè¦†ç›–9ç§ç”Ÿç‰©ï¼‰
- âœ… ç¤¾åŒºæ”¯æŒ

æ ¹æ®GPL-3.0åè®®ï¼Œä½ å¯ä»¥ï¼š
- âœ… è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹ã€åˆ†å‘
- âœ… ç”¨äºå•†ä¸šæœåŠ¡å™¨
- âš ï¸ ä¿®æ”¹åçš„ç‰ˆæœ¬å¿…é¡»åŒæ ·å¼€æºï¼ˆGPL-3.0ï¼‰
- âš ï¸ å¿…é¡»ä¿ç•™ç‰ˆæƒå£°æ˜

---

## â­ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ Star æ”¯æŒä¸€ä¸‹ï¼

